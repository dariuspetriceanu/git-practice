// ... (import statements)

const Maturity = () => {
  const [maturity, setMaturity] = useState([]);

  useEffect(() => {
    getMaturityFromAPI();
  }, []);

  const getMaturityFromAPI = () => {
    getAllMaturity()
      .then((res) => {
        setMaturity(res.data);
      })
      .catch((err) => {
        setMaturity([]);
        console.log(err);
      });
  };

  const currentDate = new Date('2021-08-08'); // August 8, 2021

  const filteredMaturity = maturity.filter((mat) => {
    if (!mat.maturityDate) {
      return false; // Skip items without maturityDate
    }

    const maturityDateComponents = mat.maturityDate.split('-');
    const maturityYear = parseInt(maturityDateComponents[0], 10);
    const maturityMonth = parseInt(maturityDateComponents[1], 10) - 1;
    const maturityDay = parseInt(maturityDateComponents[2], 10);
    const maturityDate = new Date(maturityYear, maturityMonth, maturityDay);
    
    const timeDiff = maturityDate.getTime() - currentDate.getTime();
    const daysDiff = timeDiff / (1000 * 3600 * 24);
    return daysDiff <= 5 && daysDiff >= 0;
  });

  return (
    <Table striped bordered hover>
      <thead>
        <tr>
          <th>id</th>
          <th>status</th>
          <th>type</th>
          <th>trade date</th>
          <th>maturity date</th>
          <th>trade settlement date</th>
        </tr>
      </thead>
      <tbody>
        {filteredMaturity.map((mat) => (
          <MaturityDetail info={mat} key={mat.id.toString()} />
        ))}
      </tbody>
    </Table>
  );
};

export default Maturity;
